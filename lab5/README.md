# Лабораторная работа № 5
## Алгоритмы отсечения: Лианг-Барски и Сазерленд-Ходжман

---

## Цель работы

Изучить и реализовать алгоритмы отсечения графических примитивов:
- **Алгоритм Лианга-Барски** для отсечения отрезков прямоугольным окном
- **Алгоритм Сазерленда-Ходжмана** для отсечения многоугольников прямоугольным окном

Визуализировать результаты работы алгоритмов с использованием библиотеки matplotlib.

---

## Теоретическая часть

### Алгоритм Лианга-Барски

Алгоритм Лианга-Барски — это эффективный метод отсечения отрезков прямоугольным окном, основанный на параметрическом представлении отрезка.

**Основные идеи:**
- Отрезок представляется в параметрическом виде: `P(t) = P1 + t(P2 - P1)`, где `t ∈ [0, 1]`
- Для каждой из четырех границ окна вычисляются параметры `p` и `q`
- Определяются параметры входа (`u1`) и выхода (`u2`) отрезка относительно окна
- Если `u1 > u2`, отрезок полностью невидим

**Преимущества:**
- Высокая эффективность (меньше вычислений, чем в алгоритме Коэна-Сазерленда)
- Не требует многократных пересечений
- Легко расширяется на 3D-случай

### Алгоритм Сазерленда-Ходжмана

Алгоритм Сазерленда-Ходжмана используется для отсечения выпуклых и невыпуклых многоугольников прямоугольным окном.

**Основные идеи:**
- Многоугольник последовательно отсекается каждой из четырех границ окна
- Для каждого ребра многоугольника проверяется:
  - Находятся ли обе вершины внутри границы
  - Пересекает ли ребро границу
- На каждом шаге формируется новый многоугольник

**Особенности:**
- Работает с произвольными многоугольниками (выпуклыми и невыпуклыми)
- Результат может быть пустым, если многоугольник полностью снаружи
- Порядок отсечения границ важен для корректности

---

## Описание программы

Программа состоит из следующих основных частей:

1. **Чтение данных** — функции `read_data()` и `create_sample_file()` для работы с входным файлом
2. **Алгоритм Лианга-Барски** — функция `liang_barsky()` для отсечения отрезков
3. **Алгоритм Сазерленда-Ходжмана** — функция `sutherland_hodgman()` для отсечения многоугольников
4. **Визуализация** — функция `plot_results()` для отображения результатов

### Формат входных данных

Входной файл `input.txt` содержит:
- Первая строка: количество отрезков `n`
- Следующие `n` строк: координаты отрезков в формате `x1 y1 x2 y2`
- Последняя строка: координаты окна отсечения в формате `xmin ymin xmax ymax`

---

## Тестовые данные

### Входной файл `input.txt`

```
5
10 10 90 80
20 90 80 20
-10 50 110 50
50 -10 50 110
30 30 70 70
20 20 80 80
```

### Структура данных

**Количество отрезков:** 5

**Отрезки:**
1. Отрезок 1: от точки (10, 10) до точки (90, 80)
2. Отрезок 2: от точки (20, 90) до точки (80, 20)
3. Отрезок 3: от точки (-10, 50) до точки (110, 50)
4. Отрезок 4: от точки (50, -10) до точки (50, 110)
5. Отрезок 5: от точки (30, 30) до точки (70, 70)

**Окно отсечения:** xmin = 20, ymin = 20, xmax = 80, ymax = 80

**Многоугольник для демонстрации алгоритма Сазерленда-Ходжмана:**
- Точка 1: (10, 50) — левая вершина
- Точка 2: (50, 90) — верхняя вершина
- Точка 3: (90, 50) — правая вершина
- Точка 4: (50, 10) — нижняя вершина

Многоугольник представляет собой ромб, который частично выходит за границы окна отсечения.

---

## Результаты выполнения программы

### Вывод программы

```
Окно отсечения: [20.0, 20.0, 80.0, 80.0]
Количество отрезков: 5
```

### Анализ отсечения отрезков (алгоритм Лианга-Барски)

Для каждого из 5 отрезков алгоритм Лианга-Барски определяет видимую часть:

1. **Отрезок 1 (10, 10) → (90, 80):**
   - Частично видимый
   - Отсекается левая нижняя и правая верхняя части
   - Видимая часть находится внутри окна

2. **Отрезок 2 (20, 90) → (80, 20):**
   - Частично видимый
   - Отсекается верхняя часть (90 > 80)
   - Видимая часть проходит через окно

3. **Отрезок 3 (-10, 50) → (110, 50):**
   - Горизонтальный отрезок, частично видимый
   - Отсекается левая часть (x < 20) и правая часть (x > 80)
   - Видимая часть: от x = 20 до x = 80 по линии y = 50

4. **Отрезок 4 (50, -10) → (50, 110):**
   - Вертикальный отрезок, частично видимый
   - Отсекается нижняя часть (y < 20) и верхняя часть (y > 80)
   - Видимая часть: от y = 20 до y = 80 по линии x = 50

5. **Отрезок 5 (30, 30) → (70, 70):**
   - Полностью видимый
   - Весь отрезок находится внутри окна отсечения

### Визуализация

Программа создает графическое представление результатов:

**График 1 (Лианг-Барски):**
- Красные пунктирные линии — исходные отрезки
- Зеленые жирные линии — видимые части отрезков после отсечения
- Синий прямоугольник — окно отсечения

**График 2 (Сазерленд-Ходжман):**
- Красная пунктирная линия — исходный многоугольник (ромб)
- Зеленая заливка с границей — видимая часть многоугольника после отсечения
- Синий прямоугольник — окно отсечения

---

## Выводы

1. **Алгоритм Лианга-Барски** успешно реализован и работает корректно для всех типов отрезков:
   - Полностью видимых (отрезок 5)
   - Частично видимых (отрезки 1, 2, 3, 4)
   - Полностью невидимых (в данном наборе отсутствуют)

2. **Алгоритм Сазерленда-Ходжмана** корректно обрабатывает многоугольники:
   - Правильно отсекает части, выходящие за границы окна
   - Создает новый многоугольник из видимой области
   - Работает с выпуклыми многоугольниками

3. **Преимущества реализации:**
   - Использование параметрического представления в алгоритме Лианга-Барски обеспечивает эффективность
   - Последовательное отсечение по границам в алгоритме Сазерленда-Ходжмана дает универсальность
   - Визуализация позволяет наглядно оценить корректность работы алгоритмов

4. **Практическое применение:**
   - Компьютерная графика (отображение только видимых частей объектов)
   - CAD/CAM системы (работа с чертежами и моделями)
   - Игровая индустрия (оптимизация рендеринга)
   - ГИС-системы (отображение карт и объектов в заданной области)

5. **Результаты тестирования:**
   - Все отрезки обработаны корректно
   - Многоугольник отсечен правильно
   - Визуализация подтверждает корректность работы алгоритмов
